<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MrCheap System</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- PWA Icons -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“±</text></svg>">
  <meta name="theme-color" content="#4f46e5">
  
  <!-- iOS PWA Support -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="MrCheap">
  
  <!-- Load React and Babel -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- Load Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- PWA Service Worker Registration -->
  <script>
    // Register service worker for PWA
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js').then(registration => {
          console.log('ServiceWorker registration successful');
        }).catch(err => {
          console.log('ServiceWorker registration failed: ', err);
        });
      });
    }
  </script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    // Use React and ReactDOM from global scope
    const { useState, useEffect } = React;
    
    // Custom SVG Icons
    const PackageIcon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('rect', { x: '2', y: '7', width: '20', height: '14', rx: '2', ry: '2' }),
      React.createElement('path', { d: 'M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16' })
    ]);

    const ShoppingCartIcon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('circle', { cx: '9', cy: '21', r: '1' }),
      React.createElement('circle', { cx: '20', cy: '21', r: '1' }),
      React.createElement('path', { d: 'M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6' })
    ]);

    const DollarSignIcon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('line', { x1: '12', y1: '1', x2: '12', y2: '23' }),
      React.createElement('path', { d: 'M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6' })
    ]);

    const TrendingUpIcon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('polyline', { points: '23 6 13.5 15.5 8.5 10.5 1 18' }),
      React.createElement('polyline', { points: '17 6 23 6 23 12' })
    ]);

    const UsersIcon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('path', { d: 'M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2' }),
      React.createElement('circle', { cx: '9', cy: '7', r: '4' }),
      React.createElement('path', { d: 'M23 21v-2a4 4 0 0 0-3-3.87' }),
      React.createElement('path', { d: 'M16 3.13a4 4 0 0 1 0 7.75' })
    ]);

    const FileTextIcon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('path', { d: 'M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z' }),
      React.createElement('polyline', { points: '14 2 14 8 20 8' }),
      React.createElement('line', { x1: '16', y1: '13', x2: '8', y2: '13' }),
      React.createElement('line', { x1: '16', y1: '17', x2: '8', y2: '17' }),
      React.createElement('polyline', { points: '10 9 9 9 8 9' })
    ]);

    const SettingsIcon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('circle', { cx: '12', cy: '12', r: '3' }),
      React.createElement('path', { d: 'M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z' })
    ]);

    const MenuIcon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('line', { x1: '3', y1: '12', x2: '21', y2: '12' }),
      React.createElement('line', { x1: '3', y1: '6', x2: '21', y2: '6' }),
      React.createElement('line', { x1: '3', y1: '18', x2: '21', y2: '18' })
    ]);

    const XIcon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('line', { x1: '18', y1: '6', x2: '6', y2: '18' }),
      React.createElement('line', { x1: '6', y1: '6', x2: '18', y2: '18' })
    ]);

    const PlusIcon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('line', { x1: '12', y1: '5', x2: '12', y2: '19' }),
      React.createElement('line', { x1: '5', y1: '12', x2: '19', y2: '12' })
    ]);

    const EditIcon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('path', { d: 'M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7' }),
      React.createElement('path', { d: 'M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z' })
    ]);

    const Trash2Icon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('polyline', { points: '3 6 5 6 21 6' }),
      React.createElement('path', { d: 'M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2' }),
      React.createElement('line', { x1: '10', y1: '11', x2: '10', y2: '17' }),
      React.createElement('line', { x1: '14', y1: '11', x2: '14', y2: '17' })
    ]);

    const EyeIcon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('path', { d: 'M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z' }),
      React.createElement('circle', { cx: '12', cy: '12', r: '3' })
    ]);

    const EyeOffIcon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('path', { d: 'M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24' }),
      React.createElement('line', { x1: '1', y1: '1', x2: '23', y2: '23' })
    ]);

    const HomeIcon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('path', { d: 'M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z' }),
      React.createElement('polyline', { points: '9 22 9 12 15 12 15 22' })
    ]);

    const MobileIcon = (props) => React.createElement('svg', {
      ...props,
      width: props.size || '24',
      height: props.size || '24',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      strokeWidth: '2',
      strokeLinecap: 'round',
      strokeLinejoin: 'round'
    }, [
      React.createElement('rect', { x: '5', y: '2', width: '14', height: '20', rx: '2', ry: '2' }),
      React.createElement('line', { x1: '12', y1: '18', x2: '12', y2: '18' })
    ]);

    const MrCheapSystem = () => {
      const [currentPage, setCurrentPage] = useState('dashboard');
      const [language, setLanguage] = useState('english');
      const [sidebarOpen, setSidebarOpen] = useState(true);
      const [currentUser, setCurrentUser] = useState(null);
      const [installPrompt, setInstallPrompt] = useState(null);
      const [isMobile, setIsMobile] = useState(false);
      const [showInstallBanner, setShowInstallBanner] = useState(false);

      // Check if device is mobile
      useEffect(() => {
        const checkMobile = () => {
          setIsMobile(window.innerWidth <= 768);
        };
        
        checkMobile();
        window.addEventListener('resize', checkMobile);
        
        return () => window.removeEventListener('resize', checkMobile);
      }, []);

      // PWA Install Prompt
      useEffect(() => {
        const handleBeforeInstallPrompt = (e) => {
          e.preventDefault();
          setInstallPrompt(e);
          
          // Show install banner if not already installed
          const isAppInstalled = localStorage.getItem('pwa_installed') === 'true';
          if (!isAppInstalled) {
            setShowInstallBanner(true);
          }
        };

        window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);
        
        // Check if app is already installed
        if (window.matchMedia('(display-mode: standalone)').matches) {
          localStorage.setItem('pwa_installed', 'true');
        }

        return () => window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);
      }, []);

      const handleInstallClick = () => {
        if (installPrompt) {
          installPrompt.prompt();
          installPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === 'accepted') {
              localStorage.setItem('pwa_installed', 'true');
              setShowInstallBanner(false);
            }
            setInstallPrompt(null);
          });
        }
      };

      // Data states
      const [users, setUsers] = useState([
        {
          id: '1',
          username: 'admin',
          password: 'admin123',
          role: 'admin',
          name: 'Owner',
          active: true
        }
      ]);

      const [products, setProducts] = useState([
        { id: '1', name: 'Electric Kettle', quantity: 25, buyPrice: 15000, sellPrice: 25000, category: 'Kitchen' },
        { id: '2', name: 'Multicooker', quantity: 15, buyPrice: 45000, sellPrice: 75000, category: 'Kitchen' },
        { id: '3', name: 'Pressure Cooker', quantity: 8, buyPrice: 35000, sellPrice: 55000, category: 'Kitchen' },
        { id: '4', name: 'Phone Charger', quantity: 50, buyPrice: 3000, sellPrice: 5000, category: 'Electronics' },
        { id: '5', name: 'Standing Fan', quantity: 12, buyPrice: 25000, sellPrice: 40000, category: 'Appliances' }
      ]);

      const [sales, setSales] = useState([]);
      const [purchases, setPurchases] = useState([]);
      const [expenses, setExpenses] = useState([]);

      // Load data from localStorage
      useEffect(() => {
        const savedData = localStorage.getItem('mrcheap_data');
        if (savedData) {
          try {
            const data = JSON.parse(savedData);
            if (data.users) setUsers(data.users);
            if (data.products) setProducts(data.products);
            if (data.sales) setSales(data.sales);
            if (data.purchases) setPurchases(data.purchases);
            if (data.expenses) setExpenses(data.expenses);
          } catch (error) {
            console.error('Error loading data:', error);
          }
        }
        
        // Load current user from localStorage
        const savedUser = localStorage.getItem('mrcheap_currentUser');
        if (savedUser) {
          try {
            const user = JSON.parse(savedUser);
            setCurrentUser(user);
          } catch (error) {
            console.error('Error loading user:', error);
          }
        }
      }, []);

      // Save data to localStorage
      useEffect(() => {
        const data = {
          users,
          products,
          sales,
          purchases,
          expenses
        };
        localStorage.setItem('mrcheap_data', JSON.stringify(data));
      }, [users, products, sales, purchases, expenses]);

      // Save current user to localStorage when it changes
      useEffect(() => {
        if (currentUser) {
          localStorage.setItem('mrcheap_currentUser', JSON.stringify(currentUser));
        } else {
          localStorage.removeItem('mrcheap_currentUser');
        }
      }, [currentUser]);

      // Translations
      const translations = {
        english: {
          dashboard: 'Dashboard',
          inventory: 'Inventory',
          purchases: 'Purchases',
          sales: 'Sales',
          expenses: 'Expenses',
          reports: 'Reports',
          users: 'User Management',
          settings: 'Settings',
          totalSales: 'Total Sales',
          totalPurchases: 'Total Purchases',
          currentStock: 'Current Stock Value',
          profit: 'Net Profit',
          lowStock: 'Low Stock Alerts',
          recentSales: 'Recent Sales',
          topProducts: 'Top Selling Products',
          logout: 'Logout',
          login: 'Login',
          username: 'Username',
          password: 'Password',
          businessName: 'MrCheap Electronics',
          currency: 'TZS'
        },
        swahili: {
          dashboard: 'Dashibodi',
          inventory: 'Hifadhi',
          purchases: 'Manunuzi',
          sales: 'Mauzo',
          expenses: 'Matumizi',
          reports: 'Ripoti',
          users: 'Usimamizi wa Watumiaji',
          settings: 'Mipangilio',
          totalSales: 'Jumla ya Mauzo',
          totalPurchases: 'Jumla ya Manunuzi',
          currentStock: 'Thamani ya Bidhaa',
          profit: 'Faida',
          lowStock: 'Bidhaa Zinazokwisha',
          recentSales: 'Mauzo ya Karibuni',
          topProducts: 'Bidhaa Zinazouzwa Zaidi',
          logout: 'Ondoka',
          login: 'Ingia',
          username: 'Jina la Mtumiaji',
          password: 'Neno la Siri',
          businessName: 'MrCheap Electronics',
          currency: 'TZS'
        }
      };

      const t = translations[language];

      // Login Component
      const LoginPage = () => {
        const [username, setUsername] = useState('');
        const [password, setPassword] = useState('');
        const [error, setError] = useState('');
        const [rememberMe, setRememberMe] = useState(true);

        const handleLogin = () => {
          const user = users.find(u => u.username === username && u.password === password && u.active);
          
          if (user) {
            setCurrentUser(user);
            setError('');
          } else {
            setError(language === 'english' ? 'Invalid credentials or user disabled' : 'Jina au neno la siri si sahihi');
          }
        };

        return React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4" },
          React.createElement('div', { className: "bg-white rounded-lg shadow-xl p-8 w-full max-w-md" },
            React.createElement('div', { className: "text-center mb-8" },
              React.createElement('h1', { className: "text-3xl font-bold text-indigo-600 mb-2" }, t.businessName),
              React.createElement('p', { className: "text-gray-600" }, t.login),
              React.createElement('p', { className: "text-sm text-gray-500 mt-2" },
                language === 'english' ? 'Progressive Web App' : 'Programu ya Wavuti Inayokua'
              )
            ),
            
            error && React.createElement('div', { className: "bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4" }, error),

            React.createElement('div', { className: "space-y-4" },
              React.createElement('div', null,
                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, t.username),
                React.createElement('input', {
                  type: "text",
                  value: username,
                  onChange: (e) => setUsername(e.target.value),
                  className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",
                  placeholder: language === 'english' ? 'Enter username' : 'Weka jina la mtumiaji'
                })
              ),

              React.createElement('div', null,
                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, t.password),
                React.createElement('input', {
                  type: "password",
                  value: password,
                  onChange: (e) => setPassword(e.target.value),
                  onKeyPress: (e) => e.key === 'Enter' && handleLogin(),
                  className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",
                  placeholder: language === 'english' ? 'Enter password' : 'Weka neno la siri'
                })
              ),

              React.createElement('div', { className: "flex items-center" },
                React.createElement('input', {
                  type: "checkbox",
                  id: "remember",
                  checked: rememberMe,
                  onChange: (e) => setRememberMe(e.target.checked),
                  className: "h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
                }),
                React.createElement('label', {
                  htmlFor: "remember",
                  className: "ml-2 block text-sm text-gray-700"
                }, language === 'english' ? 'Keep me logged in' : 'Nibaki nimeingia')
              ),

              React.createElement('button', {
                onClick: handleLogin,
                className: "w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition-colors"
              }, t.login),

              React.createElement('div', { className: "text-center text-sm text-gray-600 mt-4" },
                language === 'english' ? 'Default: admin / admin123' : 'Chaguo-msingi: admin / admin123'
              ),

              React.createElement('button', {
                onClick: () => setLanguage(language === 'english' ? 'swahili' : 'english'),
                className: "w-full mt-4 text-sm text-indigo-600 hover:text-indigo-800"
              }, language === 'english' ? 'Badilisha kwa Kiswahili' : 'Switch to English'),

              // Install App Button
              installPrompt && React.createElement('button', {
                onClick: handleInstallClick,
                className: "w-full mt-4 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center"
              },
                React.createElement(MobileIcon, { className: "w-5 h-5 mr-2" }),
                language === 'english' ? 'Install Mobile App' : 'Sakinisha Programu ya Simu'
              )
            )
          )
        );
      };

      // Install Banner Component
      const InstallBanner = () => {
        if (!showInstallBanner || !isMobile) return null;

        return React.createElement('div', { className: "fixed bottom-0 left-0 right-0 bg-indigo-600 text-white p-4 shadow-lg z-50" },
          React.createElement('div', { className: "flex items-center justify-between" },
            React.createElement('div', { className: "flex items-center" },
              React.createElement(MobileIcon, { className: "w-6 h-6 mr-3" }),
              React.createElement('div', null,
                React.createElement('p', { className: "font-bold" },
                  language === 'english' ? 'Install MrCheap App' : 'Sakinisha Programu ya MrCheap'
                ),
                React.createElement('p', { className: "text-sm opacity-90" },
                  language === 'english' ? 'For better experience, install on your device' : 'Kwa uzoefu bora, sakinisha kwenye kifaa chako'
                )
              )
            ),
            React.createElement('div', { className: "flex space-x-2" },
              React.createElement('button', {
                onClick: () => setShowInstallBanner(false),
                className: "px-3 py-1 border border-white rounded text-sm"
              }, language === 'english' ? 'Later' : 'Baadaye'),
              React.createElement('button', {
                onClick: handleInstallClick,
                className: "px-3 py-1 bg-white text-indigo-600 rounded text-sm font-bold"
              }, language === 'english' ? 'Install' : 'Sakinisha')
            )
          )
        );
      };

      // Bottom Navigation for Mobile
      const MobileBottomNav = () => {
        if (!isMobile) return null;

        const navItems = [
          { id: 'dashboard', icon: HomeIcon, label: t.dashboard },
          { id: 'sales', icon: ShoppingCartIcon, label: t.sales },
          { id: 'inventory', icon: PackageIcon, label: t.inventory },
          { id: 'reports', icon: FileTextIcon, label: t.reports },
          { id: 'settings', icon: SettingsIcon, label: t.settings }
        ];

        return React.createElement('div', { className: "fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around py-2 z-40" },
          navItems.map((item) =>
            React.createElement('button', {
              key: item.id,
              onClick: () => setCurrentPage(item.id),
              className: `flex flex-col items-center p-2 ${currentPage === item.id ? 'text-indigo-600' : 'text-gray-600'}`
            },
              React.createElement(item.icon, { className: "w-6 h-6" }),
              React.createElement('span', { className: "text-xs mt-1" }, item.label)
            )
          )
        );
      };

      // Dashboard Component
      const Dashboard = () => {
        const formatCurrency = (amount) => {
          return `${t.currency} ${amount.toLocaleString()}`;
        };

        const totalSales = sales.reduce((sum, sale) => sum + (sale.total || 0), 0);
        const totalPurchases = purchases.reduce((sum, purchase) => sum + (purchase.total || 0), 0);
        const totalExpenses = expenses.reduce((sum, expense) => sum + (expense.amount || 0), 0);
        const stockValue = products.reduce((sum, product) => sum + (product.quantity * product.buyPrice), 0);
        const profit = totalSales - totalPurchases - totalExpenses;

        return React.createElement('div', { className: `p-4 ${isMobile ? 'pb-20' : ''}` },
          React.createElement('h2', { className: "text-2xl font-bold text-gray-800 mb-4" }, t.dashboard),
          
          React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6" },
            React.createElement('div', { className: "bg-gradient-to-br from-green-400 to-green-600 rounded-lg shadow-lg p-4 text-white" },
              React.createElement('div', { className: "flex items-center justify-between" },
                React.createElement('div', null,
                  React.createElement('p', { className: "text-green-100 text-sm" }, t.totalSales),
                  React.createElement('p', { className: "text-xl font-bold mt-1" }, formatCurrency(totalSales))
                ),
                React.createElement(ShoppingCartIcon, { className: "w-10 h-10 text-green-200" })
              )
            ),

            React.createElement('div', { className: "bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg shadow-lg p-4 text-white" },
              React.createElement('div', { className: "flex items-center justify-between" },
                React.createElement('div', null,
                  React.createElement('p', { className: "text-blue-100 text-sm" }, t.totalPurchases),
                  React.createElement('p', { className: "text-xl font-bold mt-1" }, formatCurrency(totalPurchases))
                ),
                React.createElement(PackageIcon, { className: "w-10 h-10 text-blue-200" })
              )
            ),

            React.createElement('div', { className: "bg-gradient-to-br from-purple-400 to-purple-600 rounded-lg shadow-lg p-4 text-white" },
              React.createElement('div', { className: "flex items-center justify-between" },
                React.createElement('div', null,
                  React.createElement('p', { className: "text-purple-100 text-sm" }, t.currentStock),
                  React.createElement('p', { className: "text-xl font-bold mt-1" }, formatCurrency(stockValue))
                ),
                React.createElement(DollarSignIcon, { className: "w-10 h-10 text-purple-200" })
              )
            ),

            React.createElement('div', { className: `bg-gradient-to-br ${profit >= 0 ? 'from-emerald-400 to-emerald-600' : 'from-red-400 to-red-600'} rounded-lg shadow-lg p-4 text-white` },
              React.createElement('div', { className: "flex items-center justify-between" },
                React.createElement('div', null,
                  React.createElement('p', { className: "text-white text-sm" }, t.profit),
                  React.createElement('p', { className: "text-xl font-bold mt-1" }, formatCurrency(profit))
                ),
                React.createElement(TrendingUpIcon, { className: "w-10 h-10 text-white opacity-80" })
              )
            )
          ),

          React.createElement('div', { className: "bg-white rounded-lg shadow-lg p-4 mb-4" },
            React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-3" }, language === 'english' ? 'Quick Actions' : 'Vitendo vya Haraka'),
            React.createElement('div', { className: "grid grid-cols-2 md:grid-cols-4 gap-3" },
              React.createElement('button', {
                onClick: () => setCurrentPage('sales'),
                className: "bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition-colors"
              },
                React.createElement(ShoppingCartIcon, { className: "w-5 h-5 mx-auto mb-1" }),
                React.createElement('span', { className: "text-xs" }, language === 'english' ? 'New Sale' : 'Uza')
              ),
              React.createElement('button', {
                onClick: () => setCurrentPage('purchases'),
                className: "bg-blue-500 text-white p-3 rounded-lg hover:bg-blue-600 transition-colors"
              },
                React.createElement(PackageIcon, { className: "w-5 h-5 mx-auto mb-1" }),
                React.createElement('span', { className: "text-xs" }, language === 'english' ? 'New Purchase' : 'Nunua')
              ),
              React.createElement('button', {
                onClick: () => setCurrentPage('inventory'),
                className: "bg-purple-500 text-white p-3 rounded-lg hover:bg-purple-600 transition-colors"
              },
                React.createElement(PackageIcon, { className: "w-5 h-5 mx-auto mb-1" }),
                React.createElement('span', { className: "text-xs" }, language === 'english' ? 'View Stock' : 'Tazama Bidhaa')
              ),
              React.createElement('button', {
                onClick: () => setCurrentPage('reports'),
                className: "bg-indigo-500 text-white p-3 rounded-lg hover:bg-indigo-600 transition-colors"
              },
                React.createElement(FileTextIcon, { className: "w-5 h-5 mx-auto mb-1" }),
                React.createElement('span', { className: "text-xs" }, language === 'english' ? 'Reports' : 'Ripoti')
              )
            )
          ),

          // Low Stock Alerts
          React.createElement('div', { className: "bg-white rounded-lg shadow-lg p-4" },
            React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-3" }, t.lowStock),
            React.createElement('div', { className: "space-y-2" },
              products.filter(p => p.quantity < 10).map(product =>
                React.createElement('div', { 
                  key: product.id,
                  className: "flex justify-between items-center p-3 bg-red-50 border border-red-200 rounded-lg"
                },
                  React.createElement('div', null,
                    React.createElement('span', { className: "font-medium" }, product.name),
                    React.createElement('span', { className: "ml-2 text-sm text-red-600" } , `(${product.quantity} left)`)
                  ),
                  React.createElement('button', {
                    onClick: () => setCurrentPage('inventory'),
                    className: "text-sm text-indigo-600 hover:text-indigo-800"
                  }, language === 'english' ? 'Restock' : 'Ongeza')
                )
              ),
              products.filter(p => p.quantity < 10).length === 0 &&
                React.createElement('p', { className: "text-gray-500 text-center py-4" },
                  language === 'english' ? 'All products have sufficient stock' : 'Bidhaa zote zina idadi ya kutosha'
                )
            )
          )
        );
      };

      // Inventory Management Component (Mobile optimized)
      const InventoryPage = () => {
        const [showModal, setShowModal] = useState(false);
        const [editingProduct, setEditingProduct] = useState(null);
        const [searchTerm, setSearchTerm] = useState('');
        const [formData, setFormData] = useState({
          name: '',
          quantity: '',
          buyPrice: '',
          sellPrice: '',
          category: ''
        });

        const formatCurrency = (amount) => {
          return `${t.currency} ${amount.toLocaleString()}`;
        };

        const filteredProducts = products.filter(product =>
          product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
          product.category.toLowerCase().includes(searchTerm.toLowerCase())
        );

        const handleOpenModal = (product = null) => {
          if (product) {
            setEditingProduct(product);
            setFormData({
              name: product.name,
              quantity: product.quantity,
              buyPrice: product.buyPrice,
              sellPrice: product.sellPrice,
              category: product.category
            });
          } else {
            setEditingProduct(null);
            setFormData({
              name: '',
              quantity: '',
              buyPrice: '',
              sellPrice: '',
              category: ''
            });
          }
          setShowModal(true);
        };

        const handleCloseModal = () => {
          setShowModal(false);
          setEditingProduct(null);
          setFormData({
            name: '',
            quantity: '',
            buyPrice: '',
            sellPrice: '',
            category: ''
          });
        };

        const handleSubmit = (e) => {
          e.preventDefault();
          
          if (editingProduct) {
            setProducts(products.map(p => 
              p.id === editingProduct.id 
                ? { ...p, ...formData, quantity: Number(formData.quantity), buyPrice: Number(formData.buyPrice), sellPrice: Number(formData.sellPrice) }
                : p
            ));
          } else {
            const newProduct = {
              id: Date.now().toString(),
              ...formData,
              quantity: Number(formData.quantity),
              buyPrice: Number(formData.buyPrice),
              sellPrice: Number(formData.sellPrice)
            };
            setProducts([...products, newProduct]);
          }
          
          handleCloseModal();
        };

        const handleDelete = (productId) => {
          if (window.confirm(language === 'english' ? 'Are you sure you want to delete this product?' : 'Je, una uhakika unataka kufuta bidhaa hii?')) {
            setProducts(products.filter(p => p.id !== productId));
          }
        };

        return React.createElement('div', { className: `p-4 ${isMobile ? 'pb-20' : ''}` },
          React.createElement('div', { className: "flex justify-between items-center mb-4" },
            React.createElement('h2', { className: "text-2xl font-bold text-gray-800" }, t.inventory),
            !isMobile && React.createElement('button', {
              onClick: () => handleOpenModal(),
              className: "bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center"
            },
              React.createElement(PlusIcon, { className: "w-5 h-5 mr-2" }),
              language === 'english' ? 'Add Product' : 'Ongeza Bidhaa'
            )
          ),

          isMobile && React.createElement('button', {
            onClick: () => handleOpenModal(),
            className: "w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition-colors flex items-center justify-center mb-4"
          },
            React.createElement(PlusIcon, { className: "w-5 h-5 mr-2" }),
            language === 'english' ? 'Add Product' : 'Ongeza Bidhaa'
          ),

          // Search Bar
          React.createElement('div', { className: "mb-4" },
            React.createElement('input', {
              type: "text",
              placeholder: language === 'english' ? 'Search products...' : 'Tafuta bidhaa...',
              value: searchTerm,
              onChange: (e) => setSearchTerm(e.target.value),
              className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
            })
          ),

          // Products List/Cards for mobile
          isMobile ? React.createElement('div', { className: "space-y-3" },
            filteredProducts.map((product) =>
              React.createElement('div', { 
                key: product.id,
                className: "bg-white rounded-lg shadow p-4 border border-gray-200"
              },
                React.createElement('div', { className: "flex justify-between items-start mb-2" },
                  React.createElement('div', null,
                    React.createElement('h3', { className: "font-bold text-lg" }, product.name),
                    React.createElement('p', { className: "text-sm text-gray-600" }, product.category)
                  ),
                  product.quantity < 10 && React.createElement('span', { className: "px-2 py-1 bg-red-100 text-red-600 text-xs rounded-full" },
                    language === 'english' ? 'Low Stock' : 'Pungufu'
                  )
                ),
                
                React.createElement('div', { className: "grid grid-cols-2 gap-2 mb-3 text-sm" },
                  React.createElement('div', null,
                    React.createElement('p', { className: "text-gray-600" }, language === 'english' ? 'Quantity:' : 'Idadi:'),
                    React.createElement('p', { className: "font-bold text-lg" }, product.quantity)
                  ),
                  React.createElement('div', null,
                    React.createElement('p', { className: "text-gray-600" }, language === 'english' ? 'Stock Value:' : 'Thamani:'),
                    React.createElement('p', { className: "font-bold" }, formatCurrency(product.quantity * product.buyPrice))
                  )
                ),
                
                React.createElement('div', { className: "grid grid-cols-2 gap-2 text-sm mb-3" },
                  React.createElement('div', null,
                    React.createElement('p', { className: "text-gray-600" }, language === 'english' ? 'Buy Price:' : 'Bei ya Kununua:'),
                    React.createElement('p', null, formatCurrency(product.buyPrice))
                  ),
                  React.createElement('div', null,
                    React.createElement('p', { className: "text-gray-600" }, language === 'english' ? 'Sell Price:' : 'Bei ya Kuuza:'),
                    React.createElement('p', null, formatCurrency(product.sellPrice))
                  )
                ),
                
                React.createElement('div', { className: "flex justify-between pt-2 border-t" },
                  React.createElement('button', {
                    onClick: () => handleOpenModal(product),
                    className: "text-blue-600 hover:text-blue-800 flex items-center"
                  },
                    React.createElement(EditIcon, { className: "w-4 h-4 mr-1" }),
                    language === 'english' ? 'Edit' : 'Hariri'
                  ),
                  React.createElement('button', {
                    onClick: () => handleDelete(product.id),
                    className: "text-red-600 hover:text-red-800 flex items-center"
                  },
                    React.createElement(Trash2Icon, { className: "w-4 h-4 mr-1" }),
                    language === 'english' ? 'Delete' : 'Futa'
                  )
                )
              )
            ),
            
            filteredProducts.length === 0 && React.createElement('div', { className: "text-center py-8 text-gray-500" },
              language === 'english' ? 'No products found' : 'Hakuna bidhaa'
            )
          ) : 
          // Desktop Table View
          React.createElement('div', { className: "bg-white rounded-lg shadow-lg overflow-hidden" },
            React.createElement('div', { className: "overflow-x-auto" },
              React.createElement('table', { className: "w-full" },
                React.createElement('thead', { className: "bg-indigo-600 text-white" },
                  React.createElement('tr', null,
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Product Name' : 'Jina la Bidhaa'),
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Category' : 'Aina'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Availabe Quantity' : 'Idadi Iliopo'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Buy Price' : 'Bei ya Kununua'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Sell Price' : 'Bei ya Kuuza'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Stock Value' : 'Thamani'),
                    React.createElement('th', { className: "px-4 py-3 text-center" }, language === 'english' ? 'Actions' : 'Vitendo')
                  )
                ),
                React.createElement('tbody', null,
                  filteredProducts.map((product, index) =>
                    React.createElement('tr', { 
                      key: product.id, 
                      className: `${index % 2 === 0 ? 'bg-gray-50' : 'bg-white'} hover:bg-indigo-50`
                    },
                      React.createElement('td', { className: "px-4 py-3" },
                        React.createElement('div', { className: "flex items-center" },
                          React.createElement('span', { className: "font-medium" }, product.name),
                          product.quantity < 10 && React.createElement('span', { className: "ml-2 px-2 py-1 bg-red-100 text-red-600 text-xs rounded-full" },
                            language === 'english' ? 'Low Stock' : 'Pungufu'
                          )
                        )
                      ),
                      React.createElement('td', { className: "px-4 py-3" }, product.category),
                      React.createElement('td', { className: "px-4 py-3 text-right font-semibold" }, product.quantity),
                      React.createElement('td', { className: "px-4 py-3 text-right" }, formatCurrency(product.buyPrice)),
                      React.createElement('td', { className: "px-4 py-3 text-right" }, formatCurrency(product.sellPrice)),
                      React.createElement('td', { className: "px-4 py-3 text-right font-semibold" }, formatCurrency(product.quantity * product.buyPrice)),
                      React.createElement('td', { className: "px-4 py-3" },
                        React.createElement('div', { className: "flex justify-center space-x-2" },
                          React.createElement('button', {
                            onClick: () => handleOpenModal(product),
                            className: "text-blue-600 hover:text-blue-800",
                            title: language === 'english' ? 'Edit' : 'Hariri'
                          }, React.createElement(EditIcon, { className: "w-5 h-5" })),
                          React.createElement('button', {
                            onClick: () => handleDelete(product.id),
                            className: "text-red-600 hover:text-red-800",
                            title: language === 'english' ? 'Delete' : 'Futa'
                          }, React.createElement(Trash2Icon, { className: "w-5 h-5" }))
                        )
                      )
                    )
                  )
                )
              )
            ),

            filteredProducts.length === 0 && React.createElement('div', { className: "text-center py-8 text-gray-500" },
              language === 'english' ? 'No products found' : 'Hakuna bidhaa'
            )
          ),

          // Add/Edit Modal
          showModal && React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" },
            React.createElement('div', { className: "bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto" },
              React.createElement('div', { className: "bg-indigo-600 text-white px-6 py-4 rounded-t-lg flex justify-between items-center sticky top-0" },
                React.createElement('h3', { className: "text-xl font-bold" },
                  editingProduct 
                    ? (language === 'english' ? 'Edit Product' : 'Hariri Bidhaa')
                    : (language === 'english' ? 'Add New Product' : 'Ongeza Bidhaa Mpya')
                ),
                React.createElement('button', { 
                  onClick: handleCloseModal, 
                  className: "text-white hover:text-gray-200"
                }, React.createElement(XIcon, { className: "w-6 h-6" }))
              ),

              React.createElement('form', { onSubmit: handleSubmit, className: "p-6 space-y-4" },
                React.createElement('div', null,
                  React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                    language === 'english' ? 'Product Name' : 'Jina la Bidhaa'
                  ),
                  React.createElement('input', {
                    type: "text",
                    required: true,
                    value: formData.name,
                    onChange: (e) => setFormData({...formData, name: e.target.value}),
                    className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  })
                ),

                React.createElement('div', null,
                  React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                    language === 'english' ? 'Category' : 'Aina'
                  ),
                  React.createElement('input', {
                    type: "text",
                    required: true,
                    value: formData.category,
                    onChange: (e) => setFormData({...formData, category: e.target.value}),
                    className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  })
                ),

                React.createElement('div', null,
                  React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                    language === 'english' ? 'Quantity' : 'Idadi'
                  ),
                  React.createElement('input', {
                    type: "number",
                    required: true,
                    min: "0",
                    value: formData.quantity,
                    onChange: (e) => setFormData({...formData, quantity: e.target.value}),
                    className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  })
                ),

                React.createElement('div', null,
                  React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                    language === 'english' ? 'Buy Price (TZS)' : 'Bei ya Kununua (TZS)'
                  ),
                  React.createElement('input', {
                    type: "number",
                    required: true,
                    min: "0",
                    value: formData.buyPrice,
                    onChange: (e) => setFormData({...formData, buyPrice: e.target.value}),
                    className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  })
                ),

                React.createElement('div', null,
                  React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                    language === 'english' ? 'Sell Price (TZS)' : 'Bei ya Kuuza (TZS)'
                  ),
                  React.createElement('input', {
                    type: "number",
                    required: true,
                    min: "0",
                    value: formData.sellPrice,
                    onChange: (e) => setFormData({...formData, sellPrice: e.target.value}),
                    className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                  })
                ),

                React.createElement('div', { className: "flex space-x-3 pt-4" },
                  React.createElement('button', {
                    type: "submit",
                    className: "flex-1 bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition-colors"
                  },
                    editingProduct 
                      ? (language === 'english' ? 'Update' : 'Sasisha')
                      : (language === 'english' ? 'Add Product' : 'Ongeza')
                  ),
                  React.createElement('button', {
                    type: "button",
                    onClick: handleCloseModal,
                    className: "flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors"
                  }, language === 'english' ? 'Cancel' : 'Ghairi')
                )
              )
            )
          )
        );
      };

      // Purchases Management Component (Mobile optimized)
      const PurchasesPage = () => {
        const [showModal, setShowModal] = useState(false);
        const [searchTerm, setSearchTerm] = useState('');
        const [formData, setFormData] = useState({
          productId: '',
          quantity: '',
          pricePerUnit: '',
          date: new Date().toISOString().split('T')[0]
        });

        const formatCurrency = (amount) => {
          return `${t.currency} ${amount.toLocaleString()}`;
        };

        const formatDate = (dateString) => {
          const date = new Date(dateString);
          return date.toLocaleDateString('en-GB');
        };

        const filteredPurchases = purchases.filter(purchase => {
          const product = products.find(p => p.id === purchase.productId);
          const productName = product ? product.name : '';
          return productName.toLowerCase().includes(searchTerm.toLowerCase());
        });

        const handleOpenModal = () => {
          setFormData({
            productId: '',
            quantity: '',
            pricePerUnit: '',
            date: new Date().toISOString().split('T')[0]
          });
          setShowModal(true);
        };

        const handleCloseModal = () => {
          setShowModal(false);
          setFormData({
            productId: '',
            quantity: '',
            pricePerUnit: '',
            date: new Date().toISOString().split('T')[0]
          });
        };

        const handleSubmit = (e) => {
          e.preventDefault();
          
          const quantity = Number(formData.quantity);
          const pricePerUnit = Number(formData.pricePerUnit);
          const total = quantity * pricePerUnit;

          const newPurchase = {
            id: Date.now().toString(),
            productId: formData.productId,
            quantity: quantity,
            pricePerUnit: pricePerUnit,
            total: total,
            date: formData.date,
            createdBy: currentUser.name
          };

          setPurchases([newPurchase, ...purchases]);

          setProducts(products.map(p => 
            p.id === formData.productId 
              ? { ...p, quantity: p.quantity + quantity }
              : p
          ));

          handleCloseModal();
        };

        const handleDelete = (purchaseId) => {
          if (window.confirm(language === 'english' ? 'Are you sure you want to delete this purchase record?' : 'Je, una uhakika unataka kufuta rekodi hii?')) {
            const purchase = purchases.find(p => p.id === purchaseId);
            
            setProducts(products.map(p => 
              p.id === purchase.productId 
                ? { ...p, quantity: Math.max(0, p.quantity - purchase.quantity) }
                : p
            ));

            setPurchases(purchases.filter(p => p.id !== purchaseId));
          }
        };

        return React.createElement('div', { className: `p-4 ${isMobile ? 'pb-20' : ''}` },
          React.createElement('div', { className: "flex justify-between items-center mb-4" },
            React.createElement('h2', { className: "text-2xl font-bold text-gray-800" }, t.purchases),
            !isMobile && React.createElement('button', {
              onClick: handleOpenModal,
              className: "bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center"
            },
              React.createElement(PlusIcon, { className: "w-5 h-5 mr-2" }),
              language === 'english' ? 'New Purchase' : 'Nunua Bidhaa'
            )
          ),

          isMobile && React.createElement('button', {
            onClick: handleOpenModal,
            className: "w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center mb-4"
          },
            React.createElement(PlusIcon, { className: "w-5 h-5 mr-2" }),
            language === 'english' ? 'New Purchase' : 'Nunua Bidhaa'
          ),

          // Summary Cards
          React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-3 gap-4 mb-4" },
            React.createElement('div', { className: "bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg shadow-lg p-4 text-white" },
              React.createElement('p', { className: "text-blue-100 text-sm" }, language === 'english' ? 'Total Purchases' : 'Jumla ya Manunuzi'),
              React.createElement('p', { className: "text-xl font-bold mt-1" },
                formatCurrency(purchases.reduce((sum, p) => sum + p.total, 0))
              )
            ),
            React.createElement('div', { className: "bg-gradient-to-br from-indigo-400 to-indigo-600 rounded-lg shadow-lg p-4 text-white" },
              React.createElement('p', { className: "text-indigo-100 text-sm" }, language === 'english' ? 'Total Transactions' : 'Idadi ya Manunuzi'),
              React.createElement('p', { className: "text-xl font-bold mt-1" }, purchases.length)
            ),
            React.createElement('div', { className: "bg-gradient-to-br from-purple-400 to-purple-600 rounded-lg shadow-lg p-4 text-white" },
              React.createElement('p', { className: "text-purple-100 text-sm" }, language === 'english' ? 'This Month' : 'Mwezi Huu'),
              React.createElement('p', { className: "text-xl font-bold mt-1" },
                formatCurrency(purchases.filter(p => {
                  const purchaseDate = new Date(p.date);
                  const now = new Date();
                  return purchaseDate.getMonth() === now.getMonth() && 
                         purchaseDate.getFullYear() === now.getFullYear();
                }).reduce((sum, p) => sum + p.total, 0))
              )
            )
          ),

          // Search Bar
          React.createElement('div', { className: "mb-4" },
            React.createElement('input', {
              type: "text",
              placeholder: language === 'english' ? 'Search purchases...' : 'Tafuta manunuzi...',
              value: searchTerm,
              onChange: (e) => setSearchTerm(e.target.value),
              className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            })
          ),

          // Purchases List/Cards for mobile
          isMobile ? React.createElement('div', { className: "space-y-3" },
            filteredPurchases.map((purchase) => {
              const product = products.find(p => p.id === purchase.productId);
              return React.createElement('div', { 
                key: purchase.id,
                className: "bg-white rounded-lg shadow p-4 border border-gray-200"
              },
                React.createElement('div', { className: "flex justify-between items-start mb-2" },
                  React.createElement('div', null,
                    React.createElement('h3', { className: "font-bold" }, product ? product.name : 'N/A'),
                    React.createElement('p', { className: "text-sm text-gray-600" }, formatDate(purchase.date))
                  ),
                  React.createElement('span', { className: "px-2 py-1 bg-blue-100 text-blue-600 text-xs rounded-full" },
                    `x${purchase.quantity}`
                  )
                ),
                
                React.createElement('div', { className: "grid grid-cols-2 gap-2 mb-3 text-sm" },
                  React.createElement('div', null,
                    React.createElement('p', { className: "text-gray-600" }, language === 'english' ? 'Price/Unit:' : 'Bei/Kipande:'),
                    React.createElement('p', null, formatCurrency(purchase.pricePerUnit))
                  ),
                  React.createElement('div', null,
                    React.createElement('p', { className: "text-gray-600" }, language === 'english' ? 'Total:' : 'Jumla:'),
                    React.createElement('p', { className: "font-bold text-blue-600" }, formatCurrency(purchase.total))
                  )
                ),
                
                React.createElement('div', { className: "text-sm text-gray-600 mb-3" },
                  React.createElement('p', null,
                    language === 'english' ? 'Added by:' : 'Aliongeza:',
                    React.createElement('span', { className: "ml-2" }, purchase.createdBy)
                  )
                ),
                
                React.createElement('div', { className: "flex justify-end pt-2 border-t" },
                  React.createElement('button', {
                    onClick: () => handleDelete(purchase.id),
                    className: "text-red-600 hover:text-red-800 flex items-center text-sm"
                  },
                    React.createElement(Trash2Icon, { className: "w-4 h-4 mr-1" }),
                    language === 'english' ? 'Delete' : 'Futa'
                  )
                )
              );
            }),
            
            filteredPurchases.length === 0 && React.createElement('div', { className: "text-center py-8 text-gray-500" },
              language === 'english' ? 'No purchases recorded yet' : 'Hakuna manunuzi bado'
            )
          ) : 
          // Desktop Table View
          React.createElement('div', { className: "bg-white rounded-lg shadow-lg overflow-hidden" },
            React.createElement('div', { className: "overflow-x-auto" },
              React.createElement('table', { className: "w-full" },
                React.createElement('thead', { className: "bg-blue-600 text-white" },
                  React.createElement('tr', null,
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Date' : 'Tarehe'),
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Product' : 'Bidhaa'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Quantity' : 'Idadi'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Price/Unit' : 'Bei/Kipande'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Total' : 'Jumla'),
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Added By' : 'Aliongeza'),
                    React.createElement('th', { className: "px-4 py-3 text-center" }, language === 'english' ? 'Actions' : 'Vitendo')
                  )
                ),
                React.createElement('tbody', null,
                  filteredPurchases.map((purchase, index) => {
                    const product = products.find(p => p.id === purchase.productId);
                    return React.createElement('tr', { 
                      key: purchase.id, 
                      className: `${index % 2 === 0 ? 'bg-gray-50' : 'bg-white'} hover:bg-blue-50`
                    },
                      React.createElement('td', { className: "px-4 py-3" }, formatDate(purchase.date)),
                      React.createElement('td', { className: "px-4 py-3 font-medium" }, product ? product.name : 'N/A'),
                      React.createElement('td', { className: "px-4 py-3 text-right font-semibold" }, purchase.quantity),
                      React.createElement('td', { className: "px-4 py-3 text-right" }, formatCurrency(purchase.pricePerUnit)),
                      React.createElement('td', { className: "px-4 py-3 text-right font-bold text-blue-600" }, formatCurrency(purchase.total)),
                      React.createElement('td', { className: "px-4 py-3 text-sm text-gray-600" }, purchase.createdBy),
                      React.createElement('td', { className: "px-4 py-3" },
                        React.createElement('div', { className: "flex justify-center" },
                          React.createElement('button', {
                            onClick: () => handleDelete(purchase.id),
                            className: "text-red-600 hover:text-red-800",
                            title: language === 'english' ? 'Delete' : 'Futa'
                          }, React.createElement(Trash2Icon, { className: "w-5 h-5" }))
                        )
                      )
                    );
                  })
                )
              )
            ),

            filteredPurchases.length === 0 && React.createElement('div', { className: "text-center py-8 text-gray-500" },
              language === 'english' ? 'No purchases recorded yet' : 'Hakuna manunuzi bado'
            )
          ),

          // Add Purchase Modal
          showModal && React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" },
            React.createElement('div', { className: "bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto" },
              React.createElement('div', { className: "bg-blue-600 text-white px-6 py-4 rounded-t-lg flex justify-between items-center sticky top-0" },
                React.createElement('h3', { className: "text-xl font-bold" },
                  language === 'english' ? 'Record New Purchase' : 'Rekodi Ununuzi Mpya'
                ),
                React.createElement('button', { 
                  onClick: handleCloseModal, 
                  className: "text-white hover:text-gray-200"
                }, React.createElement(XIcon, { className: "w-6 h-6" }))
              ),

              React.createElement('form', { onSubmit: handleSubmit, className: "p-6 space-y-4" },
                React.createElement('div', null,
                  React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                    language === 'english' ? 'Select Product' : 'Chagua Bidhaa'
                  ),
                  React.createElement('select', {
                    required: true,
                    value: formData.productId,
                    onChange: (e) => {
                      const selectedProduct = products.find(p => p.id === e.target.value);
                      setFormData({
                        ...formData, 
                        productId: e.target.value,
                        pricePerUnit: selectedProduct ? selectedProduct.buyPrice : ''
                      });
                    },
                    className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  },
                    React.createElement('option', { value: "" }, language === 'english' ? 'Choose a product...' : 'Chagua bidhaa...'),
                    products.map(product =>
                      React.createElement('option', { key: product.id, value: product.id },
                        `${product.name} - ${product.category}`
                      )
                    )
                  )
                ),

                React.createElement('div', null,
                  React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                    language === 'english' ? 'Quantity' : 'Idadi'
                  ),
                  React.createElement('input', {
                    type: "number",
                    required: true,
                    min: "1",
                    value: formData.quantity,
                    onChange: (e) => setFormData({...formData, quantity: e.target.value}),
                    className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  })
                ),

                React.createElement('div', null,
                  React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                    language === 'english' ? 'Price per Unit (TZS)' : 'Bei kwa Kipande (TZS)'
                  ),
                  React.createElement('input', {
                    type: "number",
                    required: true,
                    min: "0",
                    value: formData.pricePerUnit,
                    onChange: (e) => setFormData({...formData, pricePerUnit: e.target.value}),
                    className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  })
                ),

                React.createElement('div', null,
                  React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                    language === 'english' ? 'Purchase Date' : 'Tarehe ya Ununuzi'
                  ),
                  React.createElement('input', {
                    type: "date",
                    required: true,
                    value: formData.date,
                    onChange: (e) => setFormData({...formData, date: e.target.value}),
                    className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  })
                ),

                formData.quantity && formData.pricePerUnit && React.createElement('div', { className: "bg-blue-50 border border-blue-200 rounded-lg p-4" },
                  React.createElement('p', { className: "text-sm text-gray-600" }, language === 'english' ? 'Total Amount:' : 'Jumla:'),
                  React.createElement('p', { className: "text-2xl font-bold text-blue-600" },
                    formatCurrency(Number(formData.quantity) * Number(formData.pricePerUnit))
                  )
                ),

                React.createElement('div', { className: "flex space-x-3 pt-4" },
                  React.createElement('button', {
                    type: "submit",
                    className: "flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors"
                  }, language === 'english' ? 'Record Purchase' : 'Rekodi'),
                  React.createElement('button', {
                    type: "button",
                    onClick: handleCloseModal,
                    className: "flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors"
                  }, language === 'english' ? 'Cancel' : 'Ghairi')
                )
              )
            )
          )
        );
      };

      // Sales Management Component (Mobile optimized)
      const SalesPage = () => {
        const [showModal, setShowModal] = useState(false);
        const [searchTerm, setSearchTerm] = useState('');
        const [cartItems, setCartItems] = useState([]);
        const [formData, setFormData] = useState({
          date: new Date().toISOString().split('T')[0]
        });

        const formatCurrency = (amount) => {
          return `${t.currency} ${amount.toLocaleString()}`;
        };

        const formatDate = (dateString) => {
          const date = new Date(dateString);
          return date.toLocaleDateString('en-GB');
        };

        const filteredSales = sales.filter(sale => {
          return sale.items.some(item => 
            item.productName.toLowerCase().includes(searchTerm.toLowerCase())
          );
        });

        const addToCart = (productId) => {
          const product = products.find(p => p.id === productId);
          if (!product) return;

          const existingItem = cartItems.find(item => item.productId === productId);
          if (existingItem) {
            setCartItems(cartItems.map(item =>
              item.productId === productId && item.quantity < product.quantity
                ? { ...item, quantity: item.quantity + 1 }
                : item
            ));
          } else {
            setCartItems([...cartItems, {
              productId: productId,
              productName: product.name,
              quantity: 1,
              pricePerUnit: product.sellPrice,
              maxQuantity: product.quantity
            }]);
          }
        };

        const updateCartQuantity = (productId, newQuantity) => {
          const item = cartItems.find(i => i.productId === productId);
          if (newQuantity <= 0) {
            removeFromCart(productId);
          } else if (newQuantity <= item.maxQuantity) {
            setCartItems(cartItems.map(item =>
              item.productId === productId
                ? { ...item, quantity: newQuantity }
                : item
            ));
          }
        };

        const removeFromCart = (productId) => {
          setCartItems(cartItems.filter(item => item.productId !== productId));
        };

        const calculateTotal = () => {
          return cartItems.reduce((sum, item) => sum + (item.quantity * item.pricePerUnit), 0);
        };

        const handleOpenModal = () => {
          setCartItems([]);
          setFormData({
            date: new Date().toISOString().split('T')[0]
          });
          setShowModal(true);
        };

        const handleCloseModal = () => {
          setShowModal(false);
          setCartItems([]);
          setFormData({
            date: new Date().toISOString().split('T')[0]
          });
        };

        const handleSubmit = (e) => {
          e.preventDefault();
          
          if (cartItems.length === 0) {
            alert(language === 'english' ? 'Please add items to cart' : 'Tafadhali ongeza bidhaa kwenye cart');
            return;
          }

          const total = calculateTotal();

          const newSale = {
            id: Date.now().toString(),
            items: cartItems,
            total: total,
            date: formData.date,
            createdBy: currentUser.name
          };

          setSales([newSale, ...sales]);

          cartItems.forEach(item => {
            setProducts(products.map(p =>
              p.id === item.productId
                ? { ...p, quantity: p.quantity - item.quantity }
                : p
            ));
          });

          handleCloseModal();
        };

        const handleDelete = (saleId) => {
          if (window.confirm(language === 'english' ? 'Are you sure you want to delete this sale record?' : 'Je, una uhakika unataka kufuta rekodi hii?')) {
            const sale = sales.find(s => s.id === saleId);
            
            sale.items.forEach(item => {
              setProducts(products.map(p =>
                p.id === item.productId
                  ? { ...p, quantity: p.quantity + item.quantity }
                  : p
              ));
            });

            setSales(sales.filter(s => s.id !== saleId));
          }
        };

        return React.createElement('div', { className: `p-4 ${isMobile ? 'pb-20' : ''}` },
          React.createElement('div', { className: "flex justify-between items-center mb-4" },
            React.createElement('h2', { className: "text-2xl font-bold text-gray-800" }, t.sales),
            !isMobile && React.createElement('button', {
              onClick: handleOpenModal,
              className: "bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center"
            },
              React.createElement(PlusIcon, { className: "w-5 h-5 mr-2" }),
              language === 'english' ? 'New Sale' : 'Uza Bidhaa'
            )
          ),

          isMobile && React.createElement('button', {
            onClick: handleOpenModal,
            className: "w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center mb-4"
          },
            React.createElement(PlusIcon, { className: "w-5 h-5 mr-2" }),
            language === 'english' ? 'New Sale' : 'Uza Bidhaa'
          ),

          // Summary Cards
          React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-3 gap-4 mb-4" },
            React.createElement('div', { className: "bg-gradient-to-br from-green-400 to-green-600 rounded-lg shadow-lg p-4 text-white" },
              React.createElement('p', { className: "text-green-100 text-sm" }, language === 'english' ? 'Total Sales' : 'Jumla ya Mauzo'),
              React.createElement('p', { className: "text-xl font-bold mt-1" },
                formatCurrency(sales.reduce((sum, s) => sum + s.total, 0))
              )
            ),
            React.createElement('div', { className: "bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-lg shadow-lg p-4 text-white" },
              React.createElement('p', { className: "text-emerald-100 text-sm" }, language === 'english' ? 'Total Transactions' : 'Idadi ya Mauzo'),
              React.createElement('p', { className: "text-xl font-bold mt-1" }, sales.length)
            ),
            React.createElement('div', { className: "bg-gradient-to-br from-teal-400 to-teal-600 rounded-lg shadow-lg p-4 text-white" },
              React.createElement('p', { className: "text-teal-100 text-sm" }, language === 'english' ? 'This Month' : 'Mwezi Huu'),
              React.createElement('p', { className: "text-xl font-bold mt-1" },
                formatCurrency(sales.filter(s => {
                  const saleDate = new Date(s.date);
                  const now = new Date();
                  return saleDate.getMonth() === now.getMonth() && 
                         saleDate.getFullYear() === now.getFullYear();
                }).reduce((sum, s) => sum + s.total, 0))
              )
            )
          ),

          // Search Bar
          React.createElement('div', { className: "mb-4" },
            React.createElement('input', {
              type: "text",
              placeholder: language === 'english' ? 'Search sales by item...' : 'Tafuta mauzo kwa jina la bidhaa...',
              value: searchTerm,
              onChange: (e) => setSearchTerm(e.target.value),
              className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
            })
          ),

          // Sales List/Cards for mobile
          isMobile ? React.createElement('div', { className: "space-y-3" },
            filteredSales.map((sale) =>
              React.createElement('div', { 
                key: sale.id,
                className: "bg-white rounded-lg shadow p-4 border border-gray-200"
              },
                React.createElement('div', { className: "flex justify-between items-start mb-2" },
                  React.createElement('div', null,
                    React.createElement('h3', { className: "font-bold" }, formatDate(sale.date)),
                    React.createElement('p', { className: "text-sm text-gray-600" },
                      language === 'english' ? 'Items:' : 'Bidhaa:'
                    )
                  ),
                  React.createElement('span', { className: "px-2 py-1 bg-green-100 text-green-600 text-sm rounded-full font-bold" },
                    formatCurrency(sale.total)
                  )
                ),
                
                React.createElement('div', { className: "mb-3" },
                  sale.items.map((item, i) =>
                    React.createElement('div', { key: i, className: "text-sm" },
                      `${item.productName} x${item.quantity}`
                    )
                  )
                ),
                
                React.createElement('div', { className: "text-sm text-gray-600 mb-3" },
                  React.createElement('p', null,
                    language === 'english' ? 'Sold by:' : 'Aliuza:',
                    React.createElement('span', { className: "ml-2" }, sale.createdBy)
                  )
                ),
                
                React.createElement('div', { className: "flex justify-end pt-2 border-t" },
                  React.createElement('button', {
                    onClick: () => handleDelete(sale.id),
                    className: "text-red-600 hover:text-red-800 flex items-center text-sm"
                  },
                    React.createElement(Trash2Icon, { className: "w-4 h-4 mr-1" }),
                    language === 'english' ? 'Delete' : 'Futa'
                  )
                )
              )
            ),
            
            filteredSales.length === 0 && React.createElement('div', { className: "text-center py-8 text-gray-500" },
              language === 'english' ? 'No sales recorded yet' : 'Hakuna mauzo bado'
            )
          ) : 
          // Desktop Table View
          React.createElement('div', { className: "bg-white rounded-lg shadow-lg overflow-hidden" },
            React.createElement('div', { className: "overflow-x-auto" },
              React.createElement('table', { className: "w-full" },
                React.createElement('thead', { className: "bg-green-600 text-white" },
                  React.createElement('tr', null,
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Date' : 'Tarehe'),
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Items' : 'Bidhaa'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Total Amount' : 'Jumla'),
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Sold By' : 'Aliuza'),
                    React.createElement('th', { className: "px-4 py-3 text-center" }, language === 'english' ? 'Actions' : 'Vitendo')
                  )
                ),
                React.createElement('tbody', null,
                  filteredSales.map((sale, index) =>
                    React.createElement('tr', { 
                      key: sale.id, 
                      className: `${index % 2 === 0 ? 'bg-gray-50' : 'bg-white'} hover:bg-green-50`
                    },
                      React.createElement('td', { className: "px-4 py-3" }, formatDate(sale.date)),
                      React.createElement('td', { className: "px-4 py-3" },
                        React.createElement('div', { className: "text-sm" },
                          sale.items.map((item, i) =>
                            React.createElement('div', { key: i },
                              `${item.productName} x${item.quantity}`
                            )
                          )
                        )
                      ),
                      React.createElement('td', { className: "px-4 py-3 text-right font-bold text-green-600" }, formatCurrency(sale.total)),
                      React.createElement('td', { className: "px-4 py-3 text-sm text-gray-600" }, sale.createdBy),
                      React.createElement('td', { className: "px-4 py-3" },
                        React.createElement('div', { className: "flex justify-center" },
                          React.createElement('button', {
                            onClick: () => handleDelete(sale.id),
                            className: "text-red-600 hover:text-red-800",
                            title: language === 'english' ? 'Delete' : 'Futa'
                          }, React.createElement(Trash2Icon, { className: "w-5 h-5" }))
                        )
                      )
                    )
                  )
                )
              )
            ),

            filteredSales.length === 0 && React.createElement('div', { className: "text-center py-8 text-gray-500" },
              language === 'english' ? 'No sales recorded yet' : 'Hakuna mauzo bado'
            )
          ),

          // Add Sale Modal
          showModal && React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" },
            React.createElement('div', { className: "bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto" },
              React.createElement('div', { className: "bg-green-600 text-white px-6 py-4 rounded-t-lg flex justify-between items-center sticky top-0" },
                React.createElement('h3', { className: "text-xl font-bold" },
                  language === 'english' ? 'New Sale' : 'Uza Bidhaa'
                ),
                React.createElement('button', { 
                  onClick: handleCloseModal, 
                  className: "text-white hover:text-gray-200"
                }, React.createElement(XIcon, { className: "w-6 h-6" }))
              ),

              React.createElement('form', { onSubmit: handleSubmit, className: "p-6" },
                // Date Field
                React.createElement('div', { className: "mb-6" },
                  React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                    language === 'english' ? 'Sale Date' : 'Tarehe ya Mauzo'
                  ),
                  React.createElement('input', {
                    type: "date",
                    required: true,
                    value: formData.date,
                    onChange: (e) => setFormData({...formData, date: e.target.value}),
                    className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                  })
                ),

                // Product Selection
                React.createElement('div', { className: "mb-6" },
                  React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                    language === 'english' ? 'Add Products to Cart' : 'Ongeza Bidhaa kwenye Cart'
                  ),
                  React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-3 max-h-48 overflow-y-auto border border-gray-300 rounded-lg p-3" },
                    products.filter(p => p.quantity > 0).map(product =>
                      React.createElement('button', {
                        key: product.id,
                        type: "button",
                        onClick: () => addToCart(product.id),
                        className: "text-left p-3 border border-gray-300 rounded-lg hover:bg-green-50 hover:border-green-500 transition-colors"
                      },
                        React.createElement('div', { className: "font-medium" }, product.name),
                        React.createElement('div', { className: "text-sm text-gray-600" },
                          `${formatCurrency(product.sellPrice)} | ${language === 'english' ? 'Stock' : 'Idadi'}: ${product.quantity}`
                        )
                      )
                    )
                  )
                ),

                // Cart
                cartItems.length > 0 && React.createElement('div', { className: "mb-6 border-t pt-6" },
                  React.createElement('h4', { className: "font-bold text-lg mb-4" }, language === 'english' ? 'Cart' : 'Bidhaa Zilizochaguliwa'),
                  React.createElement('div', { className: "space-y-3" },
                    cartItems.map(item =>
                      React.createElement('div', { key: item.productId, className: "flex items-center justify-between bg-gray-50 p-3 rounded-lg" },
                        React.createElement('div', { className: "flex-1" },
                          React.createElement('div', { className: "font-medium" }, item.productName),
                          React.createElement('div', { className: "text-sm text-gray-600" }, `${formatCurrency(item.pricePerUnit)} each`)
                        ),
                        React.createElement('div', { className: "flex items-center space-x-3" },
                          React.createElement('button', {
                            type: "button",
                            onClick: () => updateCartQuantity(item.productId, item.quantity - 1),
                            className: "w-8 h-8 bg-gray-300 rounded hover:bg-gray-400"
                          }, '-'),
                          React.createElement('span', { className: "font-bold w-12 text-center" }, item.quantity),
                          React.createElement('button', {
                            type: "button",
                            onClick: () => updateCartQuantity(item.productId, item.quantity + 1),
                            className: "w-8 h-8 bg-gray-300 rounded hover:bg-gray-400",
                            disabled: item.quantity >= item.maxQuantity
                          }, '+'),
                          React.createElement('span', { className: "font-bold text-green-600 w-32 text-right" },
                            formatCurrency(item.quantity * item.pricePerUnit)
                          ),
                          React.createElement('button', {
                            type: "button",
                            onClick: () => removeFromCart(item.productId),
                            className: "text-red-600 hover:text-red-800"
                          }, React.createElement(Trash2Icon, { className: "w-5 h-5" }))
                        )
                      )
                    )
                  ),

                  React.createElement('div', { className: "mt-6 bg-green-50 border border-green-200 rounded-lg p-4" },
                    React.createElement('div', { className: "flex justify-between items-center" },
                      React.createElement('span', { className: "text-lg font-medium" }, language === 'english' ? 'Total Amount:' : 'Jumla ya Malipo:'),
                      React.createElement('span', { className: "text-3xl font-bold text-green-600" },
                        formatCurrency(calculateTotal())
                      )
                    )
                  )
                ),

                React.createElement('div', { className: "flex space-x-3 pt-4" },
                  React.createElement('button', {
                    type: "submit",
                    className: "flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors font-bold"
                  }, language === 'english' ? 'Complete Sale' : 'Maliza Mauzo'),
                  React.createElement('button', {
                    type: "button",
                    onClick: handleCloseModal,
                    className: "flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors"
                  }, language === 'english' ? 'Cancel' : 'Ghairi')
                )
              )
            )
          )
        );
      };

      // Expenses Management Component (Mobile optimized)
      const ExpensesPage = () => {
        const [showModal, setShowModal] = useState(false);
        const [editingExpense, setEditingExpense] = useState(null);
        const [searchTerm, setSearchTerm] = useState('');
        const [formData, setFormData] = useState({
          description: '',
          amount: '',
          category: '',
          date: new Date().toISOString().split('T')[0]
        });

        const formatCurrency = (amount) => {
          return `${t.currency} ${amount.toLocaleString()}`;
        };

        const formatDate = (dateString) => {
          const date = new Date(dateString);
          return date.toLocaleDateString('en-GB');
        };

        const filteredExpenses = expenses.filter(expense =>
          expense.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
          expense.category.toLowerCase().includes(searchTerm.toLowerCase())
        );

        const expenseCategories = [
          { en: 'Rent', sw: 'Kodi' },
          { en: 'Electricity', sw: 'Umeme' },
          { en: 'Water', sw: 'Maji' },
          { en: 'Salaries', sw: 'Mishahara' },
          { en: 'Transport', sw: 'Usafiri' },
          { en: 'Maintenance', sw: 'Matengenezo' },
          { en: 'Marketing', sw: 'Matangazo' },
          { en: 'Other', sw: 'Mengineyo' }
        ];

        const handleOpenModal = (expense = null) => {
          if (expense) {
            setEditingExpense(expense);
            setFormData({
              description: expense.description,
              amount: expense.amount,
              category: expense.category,
              date: expense.date
            });
          } else {
            setEditingExpense(null);
            setFormData({
              description: '',
              amount: '',
              category: '',
              date: new Date().toISOString().split('T')[0]
            });
          }
          setShowModal(true);
        };

        const handleCloseModal = () => {
          setShowModal(false);
          setEditingExpense(null);
          setFormData({
            description: '',
            amount: '',
            category: '',
            date: new Date().toISOString().split('T')[0]
          });
        };

        const handleSubmit = (e) => {
          e.preventDefault();
          
          if (editingExpense) {
            setExpenses(expenses.map(exp =>
              exp.id === editingExpense.id
                ? { ...exp, ...formData, amount: Number(formData.amount) }
                : exp
            ));
          } else {
            const newExpense = {
              id: Date.now().toString(),
              ...formData,
              amount: Number(formData.amount),
              createdBy: currentUser.name
            };
            setExpenses([newExpense, ...expenses]);
          }
          
          handleCloseModal();
        };

        const handleDelete = (expenseId) => {
          if (window.confirm(language === 'english' ? 'Are you sure you want to delete this expense?' : 'Je, una uhakika unataka kufuta matumizi haya?')) {
            setExpenses(expenses.filter(exp => exp.id !== expenseId));
          }
        };

        return React.createElement('div', { className: `p-4 ${isMobile ? 'pb-20' : ''}` },
          React.createElement('div', { className: "flex justify-between items-center mb-4" },
            React.createElement('h2', { className: "text-2xl font-bold text-gray-800" }, t.expenses),
            !isMobile && React.createElement('button', {
              onClick: () => handleOpenModal(),
              className: "bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center"
            },
              React.createElement(PlusIcon, { className: "w-5 h-5 mr-2" }),
              language === 'english' ? 'Add Expense' : 'Ongeza Matumizi'
            )
          ),

          isMobile && React.createElement('button', {
            onClick: () => handleOpenModal(),
            className: "w-full bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center mb-4"
          },
            React.createElement(PlusIcon, { className: "w-5 h-5 mr-2" }),
            language === 'english' ? 'Add Expense' : 'Ongeza Matumizi'
          ),

          // Summary Cards
          React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-3 gap-4 mb-4" },
            React.createElement('div', { className: "bg-gradient-to-br from-red-400 to-red-600 rounded-lg shadow-lg p-4 text-white" },
              React.createElement('p', { className: "text-red-100 text-sm" }, language === 'english' ? 'Total Expenses' : 'Jumla ya Matumizi'),
              React.createElement('p', { className: "text-xl font-bold mt-1" },
                formatCurrency(expenses.reduce((sum, exp) => sum + exp.amount, 0))
              )
            ),
            React.createElement('div', { className: "bg-gradient-to-br from-orange-400 to-orange-600 rounded-lg shadow-lg p-4 text-white" },
              React.createElement('p', { className: "text-orange-100 text-sm" }, language === 'english' ? 'Total Records' : 'Idadi ya Rekodi'),
              React.createElement('p', { className: "text-xl font-bold mt-1" }, expenses.length)
            ),
            React.createElement('div', { className: "bg-gradient-to-br from-amber-400 to-amber-600 rounded-lg shadow-lg p-4 text-white" },
              React.createElement('p', { className: "text-amber-100 text-sm" }, language === 'english' ? 'This Month' : 'Mwezi Huu'),
              React.createElement('p', { className: "text-xl font-bold mt-1" },
                formatCurrency(expenses.filter(exp => {
                  const expenseDate = new Date(exp.date);
                  const now = new Date();
                  return expenseDate.getMonth() === now.getMonth() && 
                         expenseDate.getFullYear() === now.getFullYear();
                }).reduce((sum, exp) => sum + exp.amount, 0))
              )
            )
          ),

          // Search Bar
          React.createElement('div', { className: "mb-4" },
            React.createElement('input', {
              type: "text",
              placeholder: language === 'english' ? 'Search expenses...' : 'Tafuta matumizi...',
              value: searchTerm,
              onChange: (e) => setSearchTerm(e.target.value),
              className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
            })
          ),

          // Expenses List/Cards for mobile
          isMobile ? React.createElement('div', { className: "space-y-3" },
            filteredExpenses.map((expense) =>
              React.createElement('div', { 
                key: expense.id,
                className: "bg-white rounded-lg shadow p-4 border border-gray-200"
              },
                React.createElement('div', { className: "flex justify-between items-start mb-2" },
                  React.createElement('div', null,
                    React.createElement('h3', { className: "font-bold" }, expense.description),
                    React.createElement('p', { className: "text-sm text-gray-600" }, formatDate(expense.date))
                  ),
                  React.createElement('span', { className: "px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs" },
                    expense.category
                  )
                ),
                
                React.createElement('div', { className: "mb-3" },
                  React.createElement('p', { className: "text-2xl font-bold text-red-600" },
                    formatCurrency(expense.amount)
                  )
                ),
                
                React.createElement('div', { className: "text-sm text-gray-600 mb-3" },
                  React.createElement('p', null,
                    language === 'english' ? 'Added by:' : 'Aliongeza:',
                    React.createElement('span', { className: "ml-2" }, expense.createdBy)
                  )
                ),
                
                React.createElement('div', { className: "flex justify-between pt-2 border-t" },
                  React.createElement('button', {
                    onClick: () => handleOpenModal(expense),
                    className: "text-blue-600 hover:text-blue-800 flex items-center text-sm"
                  },
                    React.createElement(EditIcon, { className: "w-4 h-4 mr-1" }),
                    language === 'english' ? 'Edit' : 'Hariri'
                  ),
                  React.createElement('button', {
                    onClick: () => handleDelete(expense.id),
                    className: "text-red-600 hover:text-red-800 flex items-center text-sm"
                  },
                    React.createElement(Trash2Icon, { className: "w-4 h-4 mr-1" }),
                    language === 'english' ? 'Delete' : 'Futa'
                  )
                )
              )
            ),
            
            filteredExpenses.length === 0 && React.createElement('div', { className: "text-center py-8 text-gray-500" },
              language === 'english' ? 'No expenses recorded yet' : 'Hakuna matumizi bado'
            )
          ) : 
          // Desktop Table View
          React.createElement('div', { className: "bg-white rounded-lg shadow-lg overflow-hidden" },
            React.createElement('div', { className: "overflow-x-auto" },
              React.createElement('table', { className: "w-full" },
                React.createElement('thead', { className: "bg-red-600 text-white" },
                  React.createElement('tr', null,
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Date' : 'Tarehe'),
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Description' : 'Maelezo'),
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Category' : 'Aina'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Amount' : 'Kiasi'),
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Added By' : 'Aliongeza'),
                    React.createElement('th', { className: "px-4 py-3 text-center" }, language === 'english' ? 'Actions' : 'Vitendo')
                  )
                ),
                React.createElement('tbody', null,
                  filteredExpenses.map((expense, index) =>
                    React.createElement('tr', { 
                      key: expense.id, 
                      className: `${index % 2 === 0 ? 'bg-gray-50' : 'bg-white'} hover:bg-red-50`
                    },
                      React.createElement('td', { className: "px-4 py-3" }, formatDate(expense.date)),
                      React.createElement('td', { className: "px-4 py-3 font-medium" }, expense.description),
                      React.createElement('td', { className: "px-4 py-3" },
                        React.createElement('span', { className: "px-2 py-1 bg-red-100 text-red-800 rounded-full text-sm" },
                          expense.category
                        )
                      ),
                      React.createElement('td', { className: "px-4 py-3 text-right font-bold text-red-600" }, formatCurrency(expense.amount)),
                      React.createElement('td', { className: "px-4 py-3 text-sm text-gray-600" }, expense.createdBy),
                      React.createElement('td', { className: "px-4 py-3" },
                        React.createElement('div', { className: "flex justify-center space-x-2" },
                          React.createElement('button', {
                            onClick: () => handleOpenModal(expense),
                            className: "text-blue-600 hover:text-blue-800",
                            title: language === 'english' ? 'Edit' : 'Hariri'
                          }, React.createElement(EditIcon, { className: "w-5 h-5" })),
                          React.createElement('button', {
                            onClick: () => handleDelete(expense.id),
                            className: "text-red-600 hover:text-red-800",
                            title: language === 'english' ? 'Delete' : 'Futa'
                          }, React.createElement(Trash2Icon, { className: "w-5 h-5" }))
                        )
                      )
                    )
                  )
                )
              )
            ),

            filteredExpenses.length === 0 && React.createElement('div', { className: "text-center py-8 text-gray-500" },
              language === 'english' ? 'No expenses recorded yet' : 'Hakuna matumizi bado'
            )
          ),

          // Add/Edit Modal
          showModal && React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" },
            React.createElement('div', { className: "bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto" },
              React.createElement('div', { className: "bg-red-600 text-white px-6 py-4 rounded-t-lg flex justify-between items-center sticky top-0" },
                React.createElement('h3', { className: "text-xl font-bold" },
                  editingExpense
                    ? (language === 'english' ? 'Edit Expense' : 'Hariri Matumizi')
                    : (language === 'english' ? 'Add New Expense' : 'Ongeza Matumizi Mapya')
                ),
                React.createElement('button', { 
                  onClick: handleCloseModal, 
                  className: "text-white hover:text-gray-200"
                }, React.createElement(XIcon, { className: "w-6 h-6" }))
              ),

              React.createElement('form', { onSubmit: handleSubmit, className: "p-6 space-y-4" },
                React.createElement('div', null,
                  React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                    language === 'english' ? 'Description' : 'Maelezo'
                  ),
                  React.createElement('input', {
                    type: "text",
                    required: true,
                    value: formData.description,
                    onChange: (e) => setFormData({...formData, description: e.target.value}),
                    className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",
                    placeholder: language === 'english' ? 'Enter description' : 'Weka maelezo'
                  })
                ),

                React.createElement('div', null,
                  React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                    language === 'english' ? 'Category' : 'Aina'
                  ),
                  React.createElement('select', {
                    required: true,
                    value: formData.category,
                    onChange: (e) => setFormData({...formData, category: e.target.value}),
                    className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                  },
                    React.createElement('option', { value: "" }, language === 'english' ? 'Select category...' : 'Chagua aina...'),
                    expenseCategories.map(cat =>
                      React.createElement('option', { key: cat.en, value: language === 'english' ? cat.en : cat.sw },
                        language === 'english' ? cat.en : cat.sw
                      )
                    )
                  )
                ),

                React.createElement('div', null,
                  React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                    language === 'english' ? 'Amount (TZS)' : 'Kiasi (TZS)'
                  ),
                  React.createElement('input', {
                    type: "number",
                    required: true,
                    min: "0",
                    value: formData.amount,
                    onChange: (e) => setFormData({...formData, amount: e.target.value}),
                    className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                  })
                ),

                React.createElement('div', null,
                  React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                    language === 'english' ? 'Date' : 'Tarehe'
                  ),
                  React.createElement('input', {
                    type: "date",
                    required: true,
                    value: formData.date,
                    onChange: (e) => setFormData({...formData, date: e.target.value}),
                    className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                  })
                ),

                React.createElement('div', { className: "flex space-x-3 pt-4" },
                  React.createElement('button', {
                    type: "submit",
                    className: "flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors"
                  },
                    editingExpense
                      ? (language === 'english' ? 'Update' : 'Sasisha')
                      : (language === 'english' ? 'Add Expense' : 'Ongeza')
                  ),
                  React.createElement('button', {
                    type: "button",
                    onClick: handleCloseModal,
                    className: "flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors"
                  }, language === 'english' ? 'Cancel' : 'Ghairi')
                )
              )
            )
          )
        );
      };

      // Reports Component (Mobile optimized)
      const ReportsPage = () => {
        const [reportType, setReportType] = useState('summary');
        const [dateFrom, setDateFrom] = useState(new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString().split('T')[0]);
        const [dateTo, setDateTo] = useState(new Date().toISOString().split('T')[0]);

        const formatCurrency = (amount) => {
          return `${t.currency} ${amount.toLocaleString()}`;
        };

        const formatDate = (dateString) => {
          const date = new Date(dateString);
          return date.toLocaleDateString('en-GB');
        };

        const filterByDate = (items, dateField = 'date') => {
          return items.filter(item => {
            const itemDate = new Date(item[dateField]);
            const from = new Date(dateFrom);
            const to = new Date(dateTo);
            return itemDate >= from && itemDate <= to;
          });
        };

        const filteredSales = filterByDate(sales);
        const filteredPurchases = filterByDate(purchases);
        const filteredExpenses = filterByDate(expenses);

        const totalSales = filteredSales.reduce((sum, s) => sum + s.total, 0);
        const totalPurchases = filteredPurchases.reduce((sum, p) => sum + p.total, 0);
        const totalExpenses = filteredExpenses.reduce((sum, e) => sum + e.amount, 0);
        const grossProfit = totalSales - totalPurchases;
        const netProfit = totalSales - totalPurchases - totalExpenses;

        const printReport = () => {
          window.print();
        };

        return React.createElement('div', { className: `p-4 ${isMobile ? 'pb-20' : ''}` },
          React.createElement('div', { className: "flex justify-between items-center mb-4" },
            React.createElement('h2', { className: "text-2xl font-bold text-gray-800" }, t.reports),
            !isMobile && React.createElement('button', {
              onClick: printReport,
              className: "bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center print:hidden"
            },
              React.createElement(FileTextIcon, { className: "w-5 h-5 mr-2" }),
              language === 'english' ? 'Print Report' : 'Chapa Ripoti'
            )
          ),

          isMobile && React.createElement('button', {
            onClick: printReport,
            className: "w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition-colors flex items-center justify-center mb-4 print:hidden"
          },
            React.createElement(FileTextIcon, { className: "w-5 h-5 mr-2" }),
            language === 'english' ? 'Print Report' : 'Chapa Ripoti'
          ),

          // Date Range Filter
          React.createElement('div', { className: "bg-white rounded-lg shadow-lg p-4 mb-4 print:hidden" },
            React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-3 gap-3" },
              React.createElement('div', null,
                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                  language === 'english' ? 'From Date' : 'Kuanzia'
                ),
                React.createElement('input', {
                  type: "date",
                  value: dateFrom,
                  onChange: (e) => setDateFrom(e.target.value),
                  className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"
                })
              ),
              React.createElement('div', null,
                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                  language === 'english' ? 'To Date' : 'Hadi'
                ),
                React.createElement('input', {
                  type: "date",
                  value: dateTo,
                  onChange: (e) => setDateTo(e.target.value),
                  className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"
                })
              ),
              React.createElement('div', null,
                React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                  language === 'english' ? 'Report Type' : 'Aina ya Ripoti'
                ),
                React.createElement('select', {
                  value: reportType,
                  onChange: (e) => setReportType(e.target.value),
                  className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"
                },
                  React.createElement('option', { value: "summary" }, language === 'english' ? 'Summary Report' : 'Ripoti ya Muhtasari'),
                  React.createElement('option', { value: "sales" }, language === 'english' ? 'Sales Report' : 'Ripoti ya Mauzo'),
                  React.createElement('option', { value: "purchases" }, language === 'english' ? 'Purchases Report' : 'Ripoti ya Manunuzi'),
                  React.createElement('option', { value: "profit" }, language === 'english' ? 'Profit & Loss' : 'Faida na Hasara'),
                  React.createElement('option', { value: "inventory" }, language === 'english' ? 'Inventory Report' : 'Ripoti ya Bidhaa')
                )
              )
            )
          ),

          // Summary Report
          reportType === 'summary' && React.createElement('div', null,
            React.createElement('div', { className: "bg-white rounded-lg shadow-lg p-4 mb-4" },
              React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-3" },
                language === 'english' ? 'Business Summary Report' : 'Ripoti ya Muhtasari wa Biashara'
              ),
              React.createElement('p', { className: "text-gray-600 mb-4 text-sm" },
                `${language === 'english' ? 'Period:' : 'Kipindi:'} ${formatDate(dateFrom)} - ${formatDate(dateTo)}`
              ),

              React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3" },
                React.createElement('div', { className: "bg-green-50 border border-green-200 rounded-lg p-3" },
                  React.createElement('p', { className: "text-sm text-gray-600 mb-1" }, language === 'english' ? 'Total Sales' : 'Jumla ya Mauzo'),
                  React.createElement('p', { className: "text-lg font-bold text-green-600" }, formatCurrency(totalSales)),
                  React.createElement('p', { className: "text-xs text-gray-500 mt-1" }, `${filteredSales.length} ${language === 'english' ? 'transactions' : 'miamala'}`)
                ),

                React.createElement('div', { className: "bg-blue-50 border border-blue-200 rounded-lg p-3" },
                  React.createElement('p', { className: "text-sm text-gray-600 mb-1" }, language === 'english' ? 'Total Purchases' : 'Jumla ya Manunuzi'),
                  React.createElement('p', { className: "text-lg font-bold text-blue-600" }, formatCurrency(totalPurchases)),
                  React.createElement('p', { className: "text-xs text-gray-500 mt-1" }, `${filteredPurchases.length} ${language === 'english' ? 'transactions' : 'miamala'}`)
                ),

                React.createElement('div', { className: "bg-red-50 border border-red-200 rounded-lg p-3" },
                  React.createElement('p', { className: "text-sm text-gray-600 mb-1" }, language === 'english' ? 'Total Expenses' : 'Jumla ya Matumizi'),
                  React.createElement('p', { className: "text-lg font-bold text-red-600" }, formatCurrency(totalExpenses)),
                  React.createElement('p', { className: "text-xs text-gray-500 mt-1" }, `${filteredExpenses.length} ${language === 'english' ? 'records' : 'rekodi'}`)
                ),

                React.createElement('div', { className: `${netProfit >= 0 ? 'bg-emerald-50 border-emerald-200' : 'bg-red-50 border-red-200'} border rounded-lg p-3` },
                  React.createElement('p', { className: "text-sm text-gray-600 mb-1" }, language === 'english' ? 'Net Profit' : 'Faida Halisi'),
                  React.createElement('p', { className: `text-lg font-bold ${netProfit >= 0 ? 'text-emerald-600' : 'text-red-600'}` },
                    formatCurrency(netProfit)
                  ),
                  React.createElement('p', { className: "text-xs text-gray-500 mt-1" },
                    netProfit >= 0 ? (language === 'english' ? 'Profit' : 'Faida') : (language === 'english' ? 'Loss' : 'Hasara')
                  )
                )
              )
            )
          ),

          // Sales Report
          reportType === 'sales' && React.createElement('div', { className: "bg-white rounded-lg shadow-lg overflow-hidden" },
            React.createElement('div', { className: "px-4 py-3 bg-green-600 text-white" },
              React.createElement('h3', { className: "text-lg font-bold" }, language === 'english' ? 'Sales Report' : 'Ripoti ya Mauzo'),
              React.createElement('p', { className: "text-xs opacity-90" }, `${formatDate(dateFrom)} - ${formatDate(dateTo)}`)
            ),
            isMobile ? 
              React.createElement('div', { className: "p-4 space-y-3" },
                filteredSales.map((sale) =>
                  React.createElement('div', { key: sale.id, className: "border border-gray-200 rounded-lg p-3" },
                    React.createElement('div', { className: "flex justify-between items-start mb-2" },
                      React.createElement('span', { className: "font-medium" }, formatDate(sale.date)),
                      React.createElement('span', { className: "font-bold text-green-600" }, formatCurrency(sale.total))
                    ),
                    React.createElement('div', { className: "text-sm text-gray-600 mb-2" },
                      sale.items.map((item, i) =>
                        React.createElement('div', { key: i }, `${item.productName} x${item.quantity}`)
                      )
                    ),
                    React.createElement('div', { className: "text-xs text-gray-500" },
                      language === 'english' ? 'Sold by:' : 'Aliuza:',
                      React.createElement('span', { className: "ml-2" }, sale.createdBy)
                    )
                  )
                ),
                filteredSales.length === 0 && React.createElement('p', { className: "text-center py-4 text-gray-500" },
                  language === 'english' ? 'No sales in this period' : 'Hakuna mauzo katika kipindi hiki'
                ),
                filteredSales.length > 0 && React.createElement('div', { className: "bg-green-100 border border-green-200 rounded-lg p-3 font-bold" },
                  React.createElement('div', { className: "flex justify-between" },
                    React.createElement('span', null, language === 'english' ? 'TOTAL:' : 'JUMLA:'),
                    React.createElement('span', { className: "text-green-600" }, formatCurrency(totalSales))
                  )
                )
              ) :
            React.createElement('div', { className: "overflow-x-auto" },
              React.createElement('table', { className: "w-full" },
                React.createElement('thead', { className: "bg-gray-100" },
                  React.createElement('tr', null,
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Date' : 'Tarehe'),
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Items' : 'Bidhaa'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Amount' : 'Kiasi')
                  )
                ),
                React.createElement('tbody', null,
                  filteredSales.map((sale, index) =>
                    React.createElement('tr', { 
                      key: sale.id, 
                      className: index % 2 === 0 ? 'bg-gray-50' : 'bg-white'
                    },
                      React.createElement('td', { className: "px-4 py-3" }, formatDate(sale.date)),
                      React.createElement('td', { className: "px-4 py-3 text-sm" },
                        sale.items.map((item, i) =>
                          React.createElement('div', { key: i }, `${item.productName} x${item.quantity}`)
                        )
                      ),
                      React.createElement('td', { className: "px-4 py-3 text-right font-bold" }, formatCurrency(sale.total))
                    )
                  ),
                  React.createElement('tr', { className: "bg-green-100 font-bold" },
                    React.createElement('td', { colSpan: "3", className: "px-4 py-3 text-right" }, language === 'english' ? 'TOTAL:' : 'JUMLA:'),
                    React.createElement('td', { className: "px-4 py-3 text-right text-green-600" }, formatCurrency(totalSales))
                  )
                )
              )
            )
          ),

          // Purchases Report
          reportType === 'purchases' && React.createElement('div', { className: "bg-white rounded-lg shadow-lg overflow-hidden" },
            React.createElement('div', { className: "px-4 py-3 bg-blue-600 text-white" },
              React.createElement('h3', { className: "text-lg font-bold" }, language === 'english' ? 'Purchases Report' : 'Ripoti ya Manunuzi'),
              React.createElement('p', { className: "text-xs opacity-90" }, `${formatDate(dateFrom)} - ${formatDate(dateTo)}`)
            ),
            isMobile ? 
              React.createElement('div', { className: "p-4 space-y-3" },
                filteredPurchases.map((purchase) => {
                  const product = products.find(p => p.id === purchase.productId);
                  return React.createElement('div', { key: purchase.id, className: "border border-gray-200 rounded-lg p-3" },
                    React.createElement('div', { className: "flex justify-between items-start mb-2" },
                      React.createElement('span', { className: "font-medium" }, formatDate(purchase.date)),
                      React.createElement('span', { className: "font-bold text-blue-600" }, formatCurrency(purchase.total))
                    ),
                    React.createElement('div', { className: "text-sm font-medium mb-1" }, product ? product.name : 'N/A'),
                    React.createElement('div', { className: "text-sm text-gray-600 mb-2" },
                      `${language === 'english' ? 'Quantity:' : 'Idadi:'} ${purchase.quantity}`
                    ),
                    React.createElement('div', { className: "text-xs text-gray-500" },
                      language === 'english' ? 'Added by:' : 'Aliongeza:',
                      React.createElement('span', { className: "ml-2" }, purchase.createdBy)
                    )
                  );
                }),
                filteredPurchases.length === 0 && React.createElement('p', { className: "text-center py-4 text-gray-500" },
                  language === 'english' ? 'No purchases in this period' : 'Hakuna manunuzi katika kipindi hiki'
                ),
                filteredPurchases.length > 0 && React.createElement('div', { className: "bg-blue-100 border border-blue-200 rounded-lg p-3 font-bold" },
                  React.createElement('div', { className: "flex justify-between" },
                    React.createElement('span', null, language === 'english' ? 'TOTAL:' : 'JUMLA:'),
                    React.createElement('span', { className: "text-blue-600" }, formatCurrency(totalPurchases))
                  )
                )
              ) :
            React.createElement('div', { className: "overflow-x-auto" },
              React.createElement('table', { className: "w-full" },
                React.createElement('thead', { className: "bg-gray-100" },
                  React.createElement('tr', null,
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Date' : 'Tarehe'),
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Product' : 'Bidhaa'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Quantity' : 'Idadi'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Amount' : 'Kiasi')
                  )
                ),
                React.createElement('tbody', null,
                  filteredPurchases.map((purchase, index) => {
                    const product = products.find(p => p.id === purchase.productId);
                    return React.createElement('tr', { 
                      key: purchase.id, 
                      className: index % 2 === 0 ? 'bg-gray-50' : 'bg-white'
                    },
                      React.createElement('td', { className: "px-4 py-3" }, formatDate(purchase.date)),
                      React.createElement('td', { className: "px-4 py-3" }, product ? product.name : 'N/A'),
                      React.createElement('td', { className: "px-4 py-3 text-right" }, purchase.quantity),
                      React.createElement('td', { className: "px-4 py-3 text-right font-bold" }, formatCurrency(purchase.total))
                    );
                  }),
                  React.createElement('tr', { className: "bg-blue-100 font-bold" },
                    React.createElement('td', { colSpan: "4", className: "px-4 py-3 text-right" }, language === 'english' ? 'TOTAL:' : 'JUMLA:'),
                    React.createElement('td', { className: "px-4 py-3 text-right text-blue-600" }, formatCurrency(totalPurchases))
                  )
                )
              )
            )
          ),

          // Profit & Loss Report
          reportType === 'profit' && React.createElement('div', { className: "bg-white rounded-lg shadow-lg p-4" },
            React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-3" },
              language === 'english' ? 'Profit & Loss Statement' : 'Taarifa ya Faida na Hasara'
            ),
            React.createElement('p', { className: "text-sm text-gray-600 mb-4" },
              `${language === 'english' ? 'Period:' : 'Kipindi:'} ${formatDate(dateFrom)} - ${formatDate(dateTo)}`
            ),

            React.createElement('div', { className: "space-y-3" },
              React.createElement('div', { className: "border-b pb-3" },
                React.createElement('div', { className: "flex justify-between items-center" },
                  React.createElement('span', { className: "font-medium" }, language === 'english' ? 'Revenue (Sales)' : 'Mapato (Mauzo)'),
                  React.createElement('span', { className: "font-bold text-green-600" }, formatCurrency(totalSales))
                )
              ),

              React.createElement('div', { className: "border-b pb-3" },
                React.createElement('div', { className: "flex justify-between items-center" },
                  React.createElement('span', { className: "font-medium" }, language === 'english' ? 'Cost of Goods Sold' : 'Gharama za Bidhaa'),
                  React.createElement('span', { className: "font-bold text-red-600" }, `(${formatCurrency(totalPurchases)})`)
                )
              ),

              React.createElement('div', { className: "border-b pb-3 bg-blue-50 p-3 rounded" },
                React.createElement('div', { className: "flex justify-between items-center" },
                  React.createElement('span', { className: "font-bold" }, language === 'english' ? 'Gross Profit' : 'Faida Jumla'),
                  React.createElement('span', { className: `font-bold ${grossProfit >= 0 ? 'text-blue-600' : 'text-red-600'}` },
                    formatCurrency(grossProfit)
                  )
                )
              ),

              React.createElement('div', { className: "border-b pb-3" },
                React.createElement('div', { className: "flex justify-between items-center mb-2" },
                  React.createElement('span', { className: "font-medium" }, language === 'english' ? 'Operating Expenses' : 'Matumizi ya Ofisi'),
                  React.createElement('span', { className: "font-bold text-red-600" }, `(${formatCurrency(totalExpenses)})`)
                ),
                React.createElement('div', { className: "ml-3 text-xs text-gray-600 space-y-1" },
                  Object.entries(
                    filteredExpenses.reduce((acc, exp) => {
                      acc[exp.category] = (acc[exp.category] || 0) + exp.amount;
                      return acc;
                    }, {})
                  ).map(([category, amount]) =>
                    React.createElement('div', { key: category, className: "flex justify-between" },
                      React.createElement('span', null, `â€¢ ${category}`),
                      React.createElement('span', null, formatCurrency(amount))
                    )
                  )
                )
              ),

              React.createElement('div', { className: `${netProfit >= 0 ? 'bg-emerald-50' : 'bg-red-50'} p-3 rounded-lg` },
                React.createElement('div', { className: "flex justify-between items-center" },
                  React.createElement('span', { className: "font-bold text-lg" }, language === 'english' ? 'NET PROFIT/LOSS' : 'FAIDA/HASARA HALISI'),
                  React.createElement('span', { className: `font-bold text-xl ${netProfit >= 0 ? 'text-emerald-600' : 'text-red-600'}` },
                    formatCurrency(netProfit)
                  )
                ),
                React.createElement('p', { className: "text-xs text-gray-600 mt-1" },
                  netProfit >= 0 
                    ? (language === 'english' ? 'Your business made a profit' : 'Biashara yako imepata faida')
                    : (language === 'english' ? 'Your business made a loss' : 'Biashara yako imepata hasara')
                )
              )
            )
          ),

          // Inventory Report
          reportType === 'inventory' && React.createElement('div', { className: "bg-white rounded-lg shadow-lg overflow-hidden" },
            React.createElement('div', { className: "px-4 py-3 bg-purple-600 text-white" },
              React.createElement('h3', { className: "text-lg font-bold" }, language === 'english' ? 'Inventory Report' : 'Ripoti ya Bidhaa'),
              React.createElement('p', { className: "text-xs opacity-90" }, language === 'english' ? 'Current Stock Levels' : 'Hali ya Bidhaa Sasa')
            ),
            isMobile ? 
              React.createElement('div', { className: "p-4 space-y-3" },
                products.map((product) =>
                  React.createElement('div', { key: product.id, className: "border border-gray-200 rounded-lg p-3" },
                    React.createElement('div', { className: "flex justify-between items-start mb-2" },
                      React.createElement('div', null,
                        React.createElement('h4', { className: "font-bold" }, product.name),
                        React.createElement('p', { className: "text-sm text-gray-600" }, product.category)
                      ),
                      React.createElement('div', { className: "text-right" },
                        React.createElement('p', { className: "font-bold" }, product.quantity),
                        React.createElement('p', { className: "text-xs", style: {
                          color: product.quantity === 0 ? '#dc2626' : 
                                 product.quantity < 10 ? '#d97706' : '#059669'
                        } },
                          product.quantity === 0 ? (language === 'english' ? 'Out of Stock' : 'Imeisha') : 
                          product.quantity < 10 ? (language === 'english' ? 'Low Stock' : 'Pungufu') : 
                          (language === 'english' ? 'In Stock' : 'Ipo')
                        )
                      )
                    ),
                    
                    React.createElement('div', { className: "grid grid-cols-2 gap-2 text-sm" },
                      React.createElement('div', null,
                        React.createElement('p', { className: "text-gray-600" }, language === 'english' ? 'Buy Price:' : 'Bei ya Kununua:'),
                        React.createElement('p', null, formatCurrency(product.buyPrice))
                      ),
                      React.createElement('div', null,
                        React.createElement('p', { className: "text-gray-600" }, language === 'english' ? 'Sell Price:' : 'Bei ya Kuuza:'),
                        React.createElement('p', null, formatCurrency(product.sellPrice))
                      )
                    ),
                    
                    React.createElement('div', { className: "mt-2 pt-2 border-t" },
                      React.createElement('p', { className: "text-sm text-gray-600" }, language === 'english' ? 'Stock Value:' : 'Thamani:'),
                      React.createElement('p', { className: "font-bold" }, formatCurrency(product.quantity * product.buyPrice))
                    )
                  )
                ),
                React.createElement('div', { className: "bg-purple-100 border border-purple-200 rounded-lg p-3 font-bold" },
                  React.createElement('div', { className: "flex justify-between" },
                    React.createElement('span', null, language === 'english' ? 'TOTAL STOCK VALUE:' : 'THAMANI YA BIDHAA ZOTE:'),
                    React.createElement('span', { className: "text-purple-600" },
                      formatCurrency(products.reduce((sum, p) => sum + (p.quantity * p.buyPrice), 0))
                    )
                  )
                )
              ) :
            React.createElement('div', { className: "overflow-x-auto" },
              React.createElement('table', { className: "w-full" },
                React.createElement('thead', { className: "bg-gray-100" },
                  React.createElement('tr', null,
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Product' : 'Bidhaa'),
                    React.createElement('th', { className: "px-4 py-3 text-left" }, language === 'english' ? 'Category' : 'Aina'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Quantity' : 'Idadi'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Buy Price' : 'Bei ya Kununua'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Sell Price' : 'Bei ya Kuuza'),
                    React.createElement('th', { className: "px-4 py-3 text-right" }, language === 'english' ? 'Stock Value' : 'Thamani'),
                    React.createElement('th', { className: "px-4 py-3 text-center" }, language === 'english' ? 'Status' : 'Hali')
                  )
                ),
                React.createElement('tbody', null,
                  products.map((product, index) =>
                    React.createElement('tr', { 
                      key: product.id, 
                      className: index % 2 === 0 ? 'bg-gray-50' : 'bg-white'
                    },
                      React.createElement('td', { className: "px-4 py-3 font-medium" }, product.name),
                      React.createElement('td', { className: "px-4 py-3" }, product.category),
                      React.createElement('td', { className: "px-4 py-3 text-right font-bold" }, product.quantity),
                      React.createElement('td', { className: "px-4 py-3 text-right" }, formatCurrency(product.buyPrice)),
                      React.createElement('td', { className: "px-4 py-3 text-right" }, formatCurrency(product.sellPrice)),
                      React.createElement('td', { className: "px-4 py-3 text-right font-bold" }, formatCurrency(product.quantity * product.buyPrice)),
                      React.createElement('td', { className: "px-4 py-3 text-center" },
                        product.quantity === 0 ? 
                          React.createElement('span', { className: "px-2 py-1 bg-red-100 text-red-600 text-xs rounded-full" },
                            language === 'english' ? 'Out of Stock' : 'Imeisha'
                          ) : 
                        product.quantity < 10 ? 
                          React.createElement('span', { className: "px-2 py-1 bg-yellow-100 text-yellow-600 text-xs rounded-full" },
                            language === 'english' ? 'Low Stock' : 'Pungufu'
                          ) : 
                          React.createElement('span', { className: "px-2 py-1 bg-green-100 text-green-600 text-xs rounded-full" },
                            language === 'english' ? 'In Stock' : 'Ipo'
                          )
                      )
                    )
                  ),
                  React.createElement('tr', { className: "bg-purple-100 font-bold" },
                    React.createElement('td', { colSpan: "5", className: "px-4 py-3 text-right" }, language === 'english' ? 'TOTAL STOCK VALUE:' : 'THAMANI YA BIDHAA ZOTE:'),
                    React.createElement('td', { className: "px-4 py-3 text-right text-purple-600" },
                      formatCurrency(products.reduce((sum, p) => sum + (p.quantity * p.buyPrice), 0))
                    ),
                    React.createElement('td', null)
                  )
                )
              )
            )
          )
        );
      };

      // User Management Component (Desktop only)
      const UserManagementPage = () => {
        const [showModal, setShowModal] = useState(false);
        const [editingUser, setEditingUser] = useState(null);
        const [searchTerm, setSearchTerm] = useState('');
        const [showPassword, setShowPassword] = useState(false);
        const [formData, setFormData] = useState({
          username: '',
          password: '',
          name: '',
          role: 'staff'
        });

        const filteredUsers = users.filter(user =>
          user.username.toLowerCase().includes(searchTerm.toLowerCase()) ||
          user.name.toLowerCase().includes(searchTerm.toLowerCase())
        );

        const handleOpenModal = (user = null) => {
          if (user) {
            setEditingUser(user);
            setFormData({
              username: user.username,
              password: user.password,
              name: user.name,
              role: user.role
            });
          } else {
            setEditingUser(null);
            setFormData({
              username: '',
              password: '',
              name: '',
              role: 'staff'
            });
          }
          setShowPassword(false);
          setShowModal(true);
        };

        const handleCloseModal = () => {
          setShowModal(false);
          setEditingUser(null);
          setShowPassword(false);
          setFormData({
            username: '',
            password: '',
            name: '',
            role: 'staff'
          });
        };

        const handleSubmit = (e) => {
          e.preventDefault();
          
          const usernameExists = users.some(u => 
            u.username === formData.username && 
            (!editingUser || u.id !== editingUser.id)
          );
          
          if (usernameExists) {
            alert(language === 'english' ? 'Username already exists!' : 'Jina la mtumiaji lipo tayari!');
            return;
          }

          if (editingUser) {
            setUsers(users.map(u =>
              u.id === editingUser.id
                ? { ...u, ...formData }
                : u
            ));
          } else {
            const newUser = {
              id: Date.now().toString(),
              ...formData,
              active: true
            };
            setUsers([...users, newUser]);
          }
          
          handleCloseModal();
        };

        const handleToggleActive = (userId) => {
          setUsers(users.map(u =>
            u.id === userId
              ? { ...u, active: !u.active }
              : u
          ));
        };

        const handleDelete = (userId) => {
          if (userId === '1') {
            alert(language === 'english' ? 'Cannot delete admin user!' : 'Huwezi kufuta mtumiaji admin!');
            return;
          }
          
          if (window.confirm(language === 'english' ? 'Are you sure you want to delete this user?' : 'Je, una uhakika unataka kufuta mtumiaji huyu?')) {
            setUsers(users.filter(u => u.id !== userId));
          }
        };

        if (isMobile) {
          return React.createElement('div', { className: "p-4 pb-20" },
            React.createElement('div', { className: "bg-yellow-50 border border-yellow-200 rounded-lg p-4" },
              React.createElement('h3', { className: "font-bold text-yellow-800 mb-2" },
                language === 'english' ? 'Desktop Only Feature' : 'Huduma ya Kompyuta Pekee
          
         // Service Worker for MrCheap PWA
const CACHE_NAME = 'mrcheap-v1.1.0';
const urlsToCache = [
  '/',
  '/index.html'
];

// Install event
self.addEventListener('install', event => {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then(cache => {
        return cache.addAll(urlsToCache);
      })
  );
});

// Activate event
self.addEventListener('activate', event => {
  event.waitUntil(
    caches.keys().then(cacheNames => {
      return Promise.all(
        cacheNames.map(cacheName => {
          if (cacheName !== CACHE_NAME) {
            return caches.delete(cacheName);
          }
        })
      );
    })
  );
});

// Fetch event
self.addEventListener('fetch', event => {
  event.respondWith(
    caches.match(event.request)
      .then(response => {
        // Return cached response if found
        if (response) {
          return response;
        }
        
        // Otherwise fetch from network
        return fetch(event.request).then(response => {
          // Check if we received a valid response
          if (!response || response.status !== 200 || response.type !== 'basic') {
            return response;
          }
          
          // Clone the response
          const responseToCache = response.clone();
          
          // Open cache and add response
          caches.open(CACHE_NAME)
            .then(cache => {
              cache.put(event.request, responseToCache);
            });
            
          return response;
        });
      })
      .catch(() => {
        // If both cache and network fail, show offline page
        if (event.request.mode === 'navigate') {
          return caches.match('/');
        }
      })
  );
});

// Handle app installation
self.addEventListener('message', event => {
  if (event.data && event.data.type === 'SKIP_WAITING') {
    self.skipWaiting();
  }
});
